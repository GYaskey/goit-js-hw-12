{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/js/iziToastErrors.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nexport async function fetchImages(q) {\n  const BASE_URL = 'https://pixabay.com/api/';\n  const API_KEY = '45001500-719c9808934d73fced765b961';\n  const params = {\n    key: API_KEY, //!  Як передати ключ через хедер (зараз його видно в запитах)\n    q,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: true,\n    page: 1,\n    per_page: 20,\n  };\n\n  try {\n    const res = await axios.get(BASE_URL, { params }); //! Працює і без await? response в будь якому разі - обєкт\n    return res.data;\n  } catch (error) {\n    throw new Error(error.response.status);\n  }\n}\n","export function renderImages(arr) {\n  if (!arr || arr.hits.length === 0) {\n    return '';\n  }\n\n  return arr.hits\n    .map(image => {\n      return `<li class=\"img-item\">\n  <a href=\"${image.largeImageURL}\" class=\"img-link\">\n    <img src=\"${image.webformatURL}\" alt=\"${image.tags}\" class=\"img-picture\" />\n  </a>\n  <ul class=\"img-stats\">\n    <li>\n      <p class=\"img-text\">\n        Likes\n        <span class=\"img-stat\">${image.likes}</span>\n      </p>\n    </li>\n    <li>\n      <p class=\"img-text\">\n        Views\n        <span class=\"img-stat\">${image.views}</span>\n      </p>\n    </li>\n    <li>\n      <p class=\"img-text\">\n        Comments\n        <span class=\"img-stat\">${image.comments}</span>\n      </p>\n    </li>\n    <li>\n      <p class=\"img-text\">\n        Downloads\n        <span class=\"img-stat\">${image.downloads}</span>\n      </p>\n    </li>\n  </ul>\n</li>\n`;\n    })\n    .join('');\n}\n","import iziToast from 'izitoast';\n\nexport function emptyQueryErr() {\n  iziToast.error({\n    title: 'Error',\n    message: 'Please type your request!',\n    position: 'topRight',\n    backgroundColor: '#EF4040',\n    iconColor: '#fff',\n    messageColor: '#fff',\n    titleColor: '#fff',\n  });\n}\n\nexport function noImgFoundErr() {\n  iziToast.error({\n    title: 'Error',\n    message:\n      'Sorry, there are no images matching your search query. Please try again!',\n    position: 'topRight',\n    backgroundColor: '#EF4040',\n    iconColor: '#fff',\n    messageColor: '#fff',\n    titleColor: '#fff',\n  });\n}\n\nexport function globalErr(error) {\n  iziToast.error({\n    title: 'Error',\n    message: `Sorry, something went wrong: ${error.message}`,\n    position: 'topRight',\n    backgroundColor: '#EF4040',\n    iconColor: '#fff',\n    messageColor: '#fff',\n    titleColor: '#fff',\n  });\n}\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nimport { fetchImages } from './js/pixabay-api';\nimport { renderImages } from './js/render-functions';\nimport axios from 'axios';\nimport { emptyQueryErr, globalErr, noImgFoundErr } from './js/iziToastErrors';\n\nexport const refs = {\n  form: document.querySelector('.form'),\n  list: document.querySelector('.img-list'),\n  imgList: document.querySelector('.img-item'),\n  loader: document.querySelector('.loader'),\n  btnLoadMore: document.querySelector('.js-btn-load-more'),\n};\n\nrefs.form.addEventListener('submit', onFormSubmit);\n\nasync function onFormSubmit(e) {\n  e.preventDefault();\n  refs.list.innerHTML = '';\n  const query = e.target.elements.searchInput.value.trim();\n  if (query === '') return emptyQueryErr();\n\n  e.target.reset();\n  refs.loader.classList.remove('visually-hidden');\n\n  try {\n    const qRes = await fetchImages(query);\n    console.log(qRes);\n    if (qRes.hits.length === 0) {\n      noImgFoundErr();\n      refs.loader.classList.add('visually-hidden');\n      return '';\n    }\n\n    const markup = renderImages(qRes);\n    refs.list.innerHTML = markup;\n    refs.loader.classList.add('visually-hidden');\n    showLoadMoreBtn(); //!===================== продовжити функцію\n    new SimpleLightbox('.img-list a', {\n      captionsData: 'alt',\n      captionDelay: 250,\n    }).refresh();\n  } catch (error) {\n    globalErr(error);\n  }\n}\n\n//?=======================================================================\n\nfunction showLoadMoreBtn() {\n  refs.btnLoadMore.classList.remove('visually-hidden');\n}\n\nfunction hideLoadMoreBtn() {\n  refs.btnLoadMore.classList.add('visually-hidden');\n}\n\nrefs.btnLoadMore.addEventListener('click', onLoadBtnClick);\n\nasync function onLoadBtnClick() {}\n"],"names":["fetchImages","q","BASE_URL","params","res","axios","error","renderImages","arr","image","emptyQueryErr","iziToast","noImgFoundErr","globalErr","refs","onFormSubmit","e","query","qRes","markup","showLoadMoreBtn","SimpleLightbox","onLoadBtnClick"],"mappings":"owBAEO,eAAeA,EAAYC,EAAG,CACnC,MAAMC,EAAW,2BAEXC,EAAS,CACb,IAFc,qCAGd,EAAAF,EACA,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,KAAM,EACN,SAAU,EACd,EAEE,GAAI,CACF,MAAMG,EAAM,MAAMC,EAAM,IAAIH,EAAU,CAAE,OAAAC,CAAM,CAAE,EAAE;AAClD,OAAOC,EAAI,IACZ,OAAQE,EAAO,CACd,MAAM,IAAI,MAAMA,EAAM,SAAS,MAAM,CACtC,CACH,CCrBO,SAASC,EAAaC,EAAK,CAChC,MAAI,CAACA,GAAOA,EAAI,KAAK,SAAW,EACvB,GAGFA,EAAI,KACR,IAAIC,GACI;AAAA,aACAA,EAAM,aAAa;AAAA,gBAChBA,EAAM,YAAY,UAAUA,EAAM,IAAI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iCAMrBA,EAAM,KAAK;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iCAMXA,EAAM,KAAK;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iCAMXA,EAAM,QAAQ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iCAMdA,EAAM,SAAS;AAAA;AAAA;AAAA;AAAA;AAAA,CAM3C,EACA,KAAK,EAAE,CACZ,CCvCO,SAASC,GAAgB,CAC9BC,EAAS,MAAM,CACb,MAAO,QACP,QAAS,4BACT,SAAU,WACV,gBAAiB,UACjB,UAAW,OACX,aAAc,OACd,WAAY,MAChB,CAAG,CACH,CAEO,SAASC,GAAgB,CAC9BD,EAAS,MAAM,CACb,MAAO,QACP,QACE,2EACF,SAAU,WACV,gBAAiB,UACjB,UAAW,OACX,aAAc,OACd,WAAY,MAChB,CAAG,CACH,CAEO,SAASE,EAAUP,EAAO,CAC/BK,EAAS,MAAM,CACb,MAAO,QACP,QAAS,gCAAgCL,EAAM,OAAO,GACtD,SAAU,WACV,gBAAiB,UACjB,UAAW,OACX,aAAc,OACd,WAAY,MAChB,CAAG,CACH,CC1BO,MAAMQ,EAAO,CAClB,KAAM,SAAS,cAAc,OAAO,EACpC,KAAM,SAAS,cAAc,WAAW,EACxC,QAAS,SAAS,cAAc,WAAW,EAC3C,OAAQ,SAAS,cAAc,SAAS,EACxC,YAAa,SAAS,cAAc,mBAAmB,CACzD,EAEAA,EAAK,KAAK,iBAAiB,SAAUC,CAAY,EAEjD,eAAeA,EAAaC,EAAG,CAC7BA,EAAE,eAAc,EAChBF,EAAK,KAAK,UAAY,GACtB,MAAMG,EAAQD,EAAE,OAAO,SAAS,YAAY,MAAM,OAClD,GAAIC,IAAU,GAAI,OAAOP,IAEzBM,EAAE,OAAO,QACTF,EAAK,OAAO,UAAU,OAAO,iBAAiB,EAE9C,GAAI,CACF,MAAMI,EAAO,MAAMlB,EAAYiB,CAAK,EAEpC,GADA,QAAQ,IAAIC,CAAI,EACZA,EAAK,KAAK,SAAW,EACvB,OAAAN,IACAE,EAAK,OAAO,UAAU,IAAI,iBAAiB,EACpC,GAGT,MAAMK,EAASZ,EAAaW,CAAI,EAChCJ,EAAK,KAAK,UAAYK,EACtBL,EAAK,OAAO,UAAU,IAAI,iBAAiB,EAC3CM,IAAkB;AAClB,IAAIC,EAAe,cAAe,CAChC,aAAc,MACd,aAAc,GACpB,CAAK,EAAE,QAAO,CACX,OAAQf,EAAO,CACdO,EAAUP,CAAK,CAChB,CACH,CAIA,SAASc,GAAkB,CACzBN,EAAK,YAAY,UAAU,OAAO,iBAAiB,CACrD,CAMAA,EAAK,YAAY,iBAAiB,QAASQ,CAAc,EAEzD,eAAeA,GAAiB,CAAA"}